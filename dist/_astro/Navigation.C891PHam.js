import{j as o}from"./jsx-runtime.TBa3i5EZ.js";import{r as a}from"./index.CVf8TyFT.js";function u(e){if(typeof document>"u")return null;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&t.pop()?.split(";").shift()||null}function d(){try{const e=u("ecco_user");if(console.log("Raw ecco_user cookie:",e),!e)return console.log("No ecco_user cookie found"),null;const s=decodeURIComponent(e);console.log("Decoded ecco_user cookie:",s);const t=JSON.parse(s);return console.log("Parsed user data:",t),!t.user_profile||!t.user_profile.email?(console.log("Invalid user data - missing required fields"),null):(console.log("User authentication successful:",t.user_profile.email),t)}catch(e){return console.warn("Failed to parse ecco_user cookie:",e),null}}function h(){const e=d();return e!==null&&e.user_profile.status==="Active"}function m(){return d()?.user_profile||null}function f(){const e=u("session");return console.log("Session cookie check:",e),typeof document<"u"&&console.log("All cookies:",document.cookie),e!==null}function p(){return h()&&f()}function g(){return h()}function x(){const[e,s]=a.useState({isAuthenticated:!1,user:null,isLoading:!0});return a.useEffect(()=>{function t(){try{const n=g(),l=m();console.log("useAuth - checkAuth results:",{authenticated:n,user:l,hasSession:f(),fullyAuthenticated:p()}),s({isAuthenticated:n,user:l,isLoading:!1})}catch(n){console.warn("Auth check failed:",n),s({isAuthenticated:!1,user:null,isLoading:!1})}}t();const r=setInterval(t,3e4),i=()=>{t()};window.addEventListener("storage",i);const c=()=>{t()};return window.addEventListener("focus",c),()=>{clearInterval(r),window.removeEventListener("storage",i),window.removeEventListener("focus",c)}},[]),e}function w(){const{isAuthenticated:e,user:s,isLoading:t}=x();return o.jsx("header",{className:"bg-primary sticky top-0 z-50",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("a",{href:"/",className:"flex items-center",children:o.jsx("img",{src:"/img/Osmosis-logo-400.png",alt:"Osmosis",width:140,height:36,className:"h-9 w-auto"})})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[!t&&o.jsx(o.Fragment,{children:e?o.jsx(o.Fragment,{children:o.jsx("a",{href:"https://osmosis.fm/home",className:"font-mono font-normal hover:text-secondary tracking-wider transition-colors uppercase",style:{fontSize:"12px",lineHeight:"17px",color:"rgb(244, 243, 239)",fontWeight:400},children:"DASHBOARD"})}):o.jsx(o.Fragment,{children:o.jsx("a",{href:"https://osmosis.fm/enter",className:"font-mono font-normal hover:text-secondary tracking-wider transition-colors uppercase",style:{fontSize:"12px",lineHeight:"17px",color:"rgb(244, 243, 239)",fontWeight:400},children:"SIGN IN"})})}),t&&o.jsx("div",{className:"font-mono text-white/50 uppercase",style:{fontSize:"12px",lineHeight:"17px"},children:"..."})]})]})})})}export{w as default};
