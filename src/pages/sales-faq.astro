---
import FaqLayout from '../layouts/FaqLayout.astro';
import FaqHeader from '../components/FaqHeader.astro';
import FaqSidebar from '../components/FaqSidebar.astro';
import SimpleFaqAccordion from '../components/SimpleFaqAccordion.astro';
import FaqSearch from '../components/FaqSearch.astro';
import FaqSchema from '../components/FaqSchema.astro';
import faqData from '../data/faq/faq-data.json';
---

<FaqLayout title="Sales FAQ - Osmosis" description="Frequently asked questions about Osmosis - Real-Time Allocator Intelligence">
  <FaqSchema faqData={faqData} />
  
  <FaqHeader />
  
  <main class="faq-container">
    <div class="faq-grid">
      <!-- Sidebar Navigation -->
      <FaqSidebar sections={faqData.sections} />
      
      <!-- Main Content -->
      <div class="faq-content">
        <!-- Header -->
        <header class="content-header">
          <h1 class="faq-title">Sales FAQ</h1>
          <p class="faq-subtitle">
            Get answers to common questions about Osmosis - Real-Time Allocator Intelligence for asset managers
          </p>
          <FaqSearch />
        </header>
        
        <!-- FAQ Sections -->
        {faqData.sections.map((section) => (
          <section class="faq-section" id={section.id}>
            <h2 class="section-title">{section.title}</h2>
            <div class="section-questions">
              {section.questions.map((question) => (
                <SimpleFaqAccordion question={question} sectionId={section.id} />
              ))}
            </div>
          </section>
        ))}
      </div>
    </div>
  </main>
  
  <!-- Simple Footer -->
  <footer class="faq-footer">
    <div class="footer-container">
      <p class="footer-text">
        Still have questions? 
        <a href="mailto:team@osmosis.fm" class="footer-link">Get in touch</a>
      </p>
      <p class="footer-copyright">
        © 2025 Osmosis. All rights reserved.
      </p>
    </div>
  </footer>
  
  <!-- JavaScript for interactive features -->
  <script>
    // Expand/Collapse functionality removed

    // Handle URL hash navigation
    function handleHashNavigation() {
      const hash = window.location.hash;
      if (hash) {
        const element = document.getElementById(hash.substring(1));
        if (element && element.tagName === 'DETAILS') {
          element.open = true;
          setTimeout(() => {
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            element.classList.add('target-pulse');
            setTimeout(() => element.classList.remove('target-pulse'), 600);
          }, 100);
        }
      }
    }

    // Run on page load
    document.addEventListener('DOMContentLoaded', handleHashNavigation);
    
    // Run on hash change (for single page navigation)
    window.addEventListener('hashchange', handleHashNavigation);
  </script>
</FaqLayout>

<style>
/* FAQ Page Specific Styles - 8pt Grid System */
.content-header {
  margin-bottom: 64px; /* 8pt grid: 8×8 */
  text-align: center;
}

.faq-title {
  font-size: var(--text-h1);
  font-weight: 400;
  font-family: var(--font-heading);
  color: var(--text-primary);
  margin-bottom: 16px; /* 8pt grid: 8×2 */
  line-height: var(--leading-tight);
  letter-spacing: -0.02em;
}

.faq-subtitle {
  font-size: 20px;
  color: var(--text-tertiary);
  line-height: var(--leading-normal);
  margin-bottom: 32px; /* 8pt grid: 8×4 */
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.faq-section {
  margin-bottom: 80px; /* 8pt grid: 8×10 */
  scroll-margin-top: 120px;
}

.faq-section:last-of-type {
  margin-bottom: 96px; /* 8pt grid: 8×12 */
}

.section-title {
  font-size: var(--text-h2);
  font-weight: 500;
  font-family: var(--font-heading);
  color: var(--text-primary);
  margin-bottom: 32px; /* 8pt grid: 8×4 */
  line-height: var(--leading-normal);
  letter-spacing: -0.01em;
  position: relative;
  padding-top: 24px; /* 8pt grid: 8×3 - increased spacing before H2 */
}

.section-title::after {
  content: '';
  position: absolute;
  bottom: -16px; /* 8pt grid: 8×2 - increased space so underline doesn't crowd */
  left: 0;
  width: 40px; /* 8pt grid: 8×5 */
  height: 2px;
  background: var(--brand-grad);
  border-radius: 1px;
}

.section-questions {
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: 8px; /* 8pt grid - reduced border radius for enterprise feel */
  padding: 24px; /* 8pt grid: 8×3 */
  box-shadow: var(--shadow-xs);
}

/* CTA Section */
.faq-cta {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-16);
  padding: var(--space-12);
  text-align: center;
  margin-top: var(--space-20);
  box-shadow: var(--shadow-sm);
}

.cta-title {
  font-size: 28px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: var(--space-4);
  font-family: var(--font-heading);
}

.cta-description {
  font-size: 18px;
  color: var(--text-secondary);
  margin-bottom: var(--space-8);
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
  line-height: var(--leading-relaxed);
}

.cta-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 16px 32px;
  background: var(--brand-grad);
  color: white;
  text-decoration: none;
  border-radius: var(--radius-12);
  font-weight: 600;
  font-size: 16px;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: var(--font-body);
}

.cta-button:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  filter: brightness(1.05);
}

/* Footer styles */
.faq-footer {
  margin-top: var(--space-24);
  padding: var(--space-8) 0;
  border-top: 1px solid var(--border-light);
  background: var(--bg-secondary);
}

.footer-container {
  max-width: var(--container-max);
  margin: 0 auto;
  padding: 0 var(--space-6);
  text-align: center;
}

.footer-text {
  font-size: var(--text-small);
  color: var(--text-tertiary);
  margin-bottom: var(--space-2);
}

.footer-link {
  color: var(--brand-primary);
  text-decoration: none;
  font-weight: 500;
}

.footer-link:hover {
  text-decoration: underline;
}

.footer-copyright {
  font-size: var(--text-micro);
  color: var(--text-muted);
}

/* Mobile Responsive - 8pt Grid */
@media (max-width: 768px) {
  .content-header {
    margin-bottom: 48px; /* 8pt grid: 8×6 */
    text-align: left;
  }
  
  .faq-subtitle {
    text-align: left;
    margin-left: 0;
    margin-right: 0;
    margin-bottom: 24px; /* 8pt grid: 8×3 */
  }
  
  .section-title {
    padding-top: 16px; /* 8pt grid: 8×2 */
  }
  
  .faq-section {
    margin-bottom: 56px; /* 8pt grid: 8×7 */
  }
  
  .section-questions {
    padding: 16px; /* 8pt grid: 8×2 */
  }
  
  .faq-cta {
    padding: 32px 24px; /* 8pt grid: 8×4, 8×3 */
    text-align: left;
  }
  
  .cta-description {
    text-align: left;
    margin-left: 0;
    margin-right: 0;
  }
  
  .cta-button {
    width: 100%;
  }
}

/* High contrast focus states for accessibility */
@media (prefers-contrast: high) {
  .section-title::after {
    background: var(--ink-900);
  }
  
  .cta-button {
    border: 2px solid var(--ink-900);
  }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
  }
  
  html {
    scroll-behavior: auto;
  }
}

/* Print styles */
@media print {
  .faq-sidebar,
  .faq-search,
  .cta-button {
    display: none;
  }
  
  .faq-grid {
    grid-template-columns: 1fr;
  }
  
  .faq-item[open] {
    background: none;
    border: none;
    padding: 0;
    margin: 0;
  }
  
  .faq-item summary {
    color: black;
  }
  
  .answer {
    color: black;
  }
}
</style>