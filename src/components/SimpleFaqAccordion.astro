---
export interface Props {
  question: any;
  sectionId: string;
}

const { question, sectionId } = Astro.props;
---

<details class="faq-item" id={`${sectionId}-${question.id}`}>
  <summary class="faq-summary">
    <h3 class="faq-question">
      {question.question}
      <button class="question-permalink" onclick={`navigator.clipboard.writeText(window.location.origin + window.location.pathname + '#${sectionId}-${question.id}'); this.textContent = 'âœ“ Copied!'; setTimeout(() => this.textContent = '#', 2000)`}>
        #
      </button>
    </h3>
    <svg class="faq-caret" width="20" height="20" viewBox="0 0 20 20" fill="none">
      <path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </summary>
  <div class="faq-answer">
    {question.answer.summary && (
      <p class="answer-summary"><strong>{question.answer.summary}</strong></p>
    )}
    
    {question.answer.details && Array.isArray(question.answer.details) && (
      <ul class="answer-list">
        {question.answer.details.map((detail: string) => (
          <li>{detail}</li>
        ))}
      </ul>
    )}
    
    {question.answer.proof && (
      <p class="answer-proof">{question.answer.proof}</p>
    )}
  </div>
</details>

<style>
/* Remove webkit marker */
.faq-summary::-webkit-details-marker {
  display: none;
}

/* Question container for permalink */
.faq-question {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin: 0;
}
</style>